## TOPページのセクション管理設計（完成版）

### 文書の目的

この文書は、useAIクラブのTOPページ（`index.html`）が将来的に大きくなっていくことを前提に、セクションの追加・変更・削除をしやすくするためのファイル構成と運用ルールを定めたものです。[1][2]
基本方針として、CSSは共通ファイルにまとめ、JavaScriptは共通処理とセクション固有処理に分割し、各セクションには一意の識別子を付けて管理します。[2][3]

***

### 1. ファイル構成のルール

**1-1. index.html**
TOPページ本体のHTMLファイルです。[4][1]
全セクションのマークアップがこのファイルに記述され、将来的にセクションが増減しても、このファイル内で管理します。[5][1]

**1-2. style.css**
全ページ共通のスタイル定義を記述するCSSファイルです。[6][2]
レイアウト（コンテナ幅・グリッド・余白）、色（ブランドカラー・文字色・背景色）、タイポグラフィ（フォントファミリー・文字サイズ・行間）などの共通スタイルを、この `style.css` ファイルの中に記述します。[2][6]
セクション固有のスタイルも、この `style.css` ファイル内で `.section-◯◯` のようなクラス名を使って記述します。[5][6]

**1-3. common.js（ファイル名は一例であり変更可）**
全ページ共通のJavaScript処理を記述するファイルです。[3][2]
ファイル名は `common.js` でなくても構いません（`global.js` や `base.js` など別の名前を使用してもよい）が、役割としては「どのページ・どのセクションにも関係する共通処理」を記述する場所として使用します。[3][2]
具体的には、グローバルナビの挙動（固定ヘッダーのスクロール挙動、ハンバーガーメニューの開閉など）と、汎用的なスクロールアニメーションなどを、この `common.js` ファイルの中に記述します。[7][1][3]

**1-4. section-◯◯.js（◯◯はセクションごとの論理名）**
各セクション固有の「大きめ機能」を記述するJavaScriptファイルです。[2][3]
ファイル名の「◯◯」の部分には、各セクションに付けた論理名（後述）を入れます。[3][2]
例：`section-hero.js`（ヒーロー・プレローダー担当）、`section-events.js`（イベントセクション担当）など。[8][3]
カルーセル、タブ切り替え、フィルタリング、専用フォームの処理など、そのセクションでしか使わない機能だけを、この `section-◯◯.js` ファイルの中に記述します。[2][3]

**1-5. images/ フォルダ**
全ページで使用する画像ファイルを格納するフォルダです。[9][2]
TOPページと下層ページで共通して使う画像を、この `images/` フォルダの中に入れます。[10][2]
必要に応じて `images/hero/`, `images/events/`, `images/kids/` のように用途別のサブフォルダを作成して整理します。[11][10]

***

### 2. HTMLセクションの識別ルール

**2-1. セクションの単位**
各セクションは、「将来的に丸ごと追加・削除・別ページ化する可能性がある内容」を1単位として扱います。[1][5]
各セクションのラッパー要素（`<section>` や `<div>` など）には、必ず一意の識別子を付けます。[6][5]

**2-2. 識別子の付け方**
各セクションのラッパー要素に、`id="section-◯◯"` または `class="section section-◯◯"` の形式で、セクションごとに論理名を含む識別子を付けます。[5][6]
「◯◯」の部分は、セクションの役割を表す任意の名前（例：`hero`, `about`, `events`, `kids`, `tools` など）を使用します。[5][2]
この「section-◯◯」という論理名は、HTML・CSS・JavaScriptのすべてで共通して使用します。[3][2]

***

### 3. JavaScriptの分割と初期化のルール

**3-1. 共通JSと個別JSの役割分担**
`common.js` には、どのセクションにも関係する共通の処理だけを記述します。[2][3]
`section-◯◯.js` には、対応する「section-◯◯」セクションにだけ関係する処理だけを記述します。[3][2]

**3-2. 各セクションJSの初期化順序**
各 `section-◯◯.js` ファイルの中では、次の順序で処理を行います。[2][3]

1. `document.querySelector('#section-◯◯')` または `document.querySelector('.section-◯◯')` を使用して、対応するセクションがDOMに存在するか確認します。[3][2]
2. 対応するセクションが存在する場合だけ、そのセクション固有の初期化処理を実行します。[2][3]
3. 対応するセクションが存在しない場合は、何も処理を行いません。[3][2]

このルールにより、`section-◯◯.js` をTOP以外のページに読み込んだ場合でも、対応するセクションがなければ何も実行されないため、エラーや副作用を防ぐことができます。[2][3]

***

### 4. JavaScriptの読み込み順ルール

**4-1. 読み込み順の基本原則**
すべてのHTMLファイルで、`common.js` を最初に読み込み、そのあとにセクション別JS（`section-◯◯.js`）を読み込みます。[12][13][2]

**4-2. 具体的な読み込み例**
- `index.html` の場合：
```
<script src="common.js"></script>
<script src="section-hero.js"></script>
<script src="section-events.js"></script>
```

- `events.html`（下層ページ）の場合：
```
<script src="common.js"></script>
<script src="section-events.js"></script>
```

**4-3. 読み込み順の理由**
この順序にする理由は、セクション別JS（`section-◯◯.js`）が `common.js` の中に記述された共通関数や共通処理に依存する可能性があるためです。[13][12][3]
「共通 → 個別」の順番を固定しておくことで、依存関係による実行エラーを防ぐことができます。[12][13][3]

**4-4. いま有効なセクション・JSの確認方法**
各HTMLファイルで「どのセクションが有効か」「どのJSが読み込まれているか」は、次の2つの方法で確認できます。[3][2]

- HTML側：そのHTMLファイル内に存在するセクションID／クラス（`section-◯◯`）を見る
- JS側：そのHTMLファイルの末尾で `<script src="section-◯◯.js">` が書かれているかを見る

この2つが対応していれば、そのセクションは有効で機能している状態です。[2][3]

***

### 5. 追加・変更・削除の運用ルール

**5-1. セクションを追加する場合**
1. 追加したい内容に対して、一意の論理名（例：`section-new-feature`）を決めます。[3][2]
2. `index.html` に、その論理名を `id` または `class` に持つラッパー要素を追加します。[1][5]
3. そのセクションに固有の機能が必要な場合は、`section-new-feature.js` を新規作成し、`index.html` の末尾（`</body>` の直前）で `<script src="section-new-feature.js"></script>` として読み込みます。[2][3]
4. 必要なスタイルを `style.css` ファイルの中に `.section-new-feature` のクラス名で追加します。[6][2]

**5-2. セクションの仕様を変更する場合**
1. 文言やマークアップ構造だけの変更なら、`index.html` の該当セクションブロックと、`style.css` の `.section-◯◯` 関連スタイルだけを編集します。[1][6][2]
2. 挙動（インタラクション）も変更する場合は、対応する `section-◯◯.js` ファイルのみを編集し、他のセクション用JavaScriptファイルには手を入れません。[3][2]

**5-3. セクションを削除する場合**
1. `index.html` から該当する「section-◯◯」ブロックを丸ごと削除します。[1][5]
2. 削除したセクションに対応する `<script src="section-◯◯.js"></script>` の行も `index.html` から削除します。[2][3]
3. 実際の `section-◯◯.js` ファイルを削除するか、「未使用」と分かるフォルダ（例：`archive/`）に移動します。[3][2]
4. 不要になった `.section-◯◯` のスタイルが `style.css` に残っている場合は、その `style.css` からスタイル定義を削除します。[6][2]

***

### 6. グローバルナビゲーションの扱い

**6-1. ナビの実装方針**
グローバルナビゲーションは、`index.html`（および各下層ページ）のHTML要素として `<nav id="main-nav">…</nav>` を直接記述し、JavaScriptで動的に生成しません。[14][1]
グローバルナビの表示とリンク構造はHTMLが担い、JavaScriptは「固定ヘッダーのスクロール時の挙動変化」や「モバイルメニューの開閉」といった動きだけを `common.js` で制御します。[15][7][1]

**6-2. ナビをHTMLに置く理由**
この方針により、JavaScriptが動作しない環境でも、グローバルナビゲーションは必ず表示され、リンクも機能する状態を保ちます。[7][15]

***

### 7. リンクと下層ページの扱い

**7-1. サイト全体の構造前提**
サイト構造は「TOP（`index.html`）」を頂点に、その下に少数の下層ページがぶら下がる"階層構造"を前提とします。[16][17][1]
ユーザーの導線は「まずTOPに来る → 必要なら下層ページに遷移する」という流れを基本とし、TOPは今後も情報量が増えていく「太いハブページ」として設計します。[18][19][1]

**7-2. グローバルナビのリンク方針**
グローバルナビのメニュー（About / Events / Kids / Tools / Join など）は、最初は同一ページ内のセクションへのアンカーリンク（例：`href="#about"`）として実装します。[20][21][1]
将来、特定の項目に下層ページ（例：`events.html`）を用意したくなった場合は、次のどちらかを選びます。[22][16]

- ナビはそのままセクション内リンク（`#events`）のままにして、セクション内部に設置した「もっと詳しく」ボタンなどから詳細ページ（`events.html`）にリンクする。
- ナビの該当メニューだけ、URLを `events.html` に変更し、「TOPのセクション」と「下層ページ」のどちらからも辿れるようにする。

**7-3. 下層ページとTOPのリンクルール**
下層ページ（例：`events.html`）を作成するときは、必ず次のリンク関係を持たせます。[21][20]

- グローバルナビはTOPと同じ構成にします（Eventsをクリックしたら `events.html` に遷移するか、`index.html#events` に戻るかは設計で決めます）。
- 下層ページの中からは、対応するTOPセクションへのリンク（例：`<a href="index.html#events">TOPのイベント情報へ</a>`）を1カ所以上用意します。

これにより、ユーザーは「TOP → 下層」「下層 → TOP」を迷わず行き来でき、内部リンク構造としても親子関係がはっきりします。[17][23][16]

**7-4. 下層ページのファイルとJSの関係**
下層ページ（例：`events.html`）は、`index.html` と同じヘッダー／フッター構造を持ち、`<main>` 要素の中身だけを変える形で作成します。[24][20]
JavaScriptの読み込みは、次のルールで行います。[2][3]

- すべてのページで `common.js` を読み込みます。
- 必要なページだけ、対応するセクションJS（例：`section-events.js`）を追加で読み込みます。

***

### 8. このルール自体の変更ルール

**8-1. ルール変更を検討するきっかけ**
このルール自体を変更するのは、次のような状況が出てきたときです。[25][26]

- セクション数や下層ページ数が増え、「今の分け方だとJSファイルやHTMLの管理が煩雑になってきた」と感じたとき。
- 新しい種類の機能（フォーム送信、検索、ログインなど）が増え、`common.js` と `section-◯◯.js` だけでは整理しにくくなったとき。

**8-2. ルール変更時の原則**
ルールを変更するときは、次の2つを守るようにします。[26][24][25]

1. **既存の命名規則や構造をできるだけ壊さない**
既存の `section-◯◯.js` という命名規則をやめる場合でも、「旧ルールのファイルはしばらくそのまま動かす」「新ルールのファイルだけ別フォルダにまとめる」など、移行期間を設けます。

2. **変更の単位を増やさない**
1つの機能や1つのセクションを変更するときに触るファイルの数が、今より増えないようにします。[27][26]

**8-3. ルール変更の記録方法**
ルールを変更したときは、少なくとも次の3つを自分用のメモとして残しておきます。[28][25]

1. いつ、どのタイミングでルールを変更したか（日付）。
2. 何をどう変更したか（例：`common.js` を `core.js` と `ui-common.js` に分割した）。
3. 旧ルールのファイルがまだ残っている場合、それらを今後どう扱うか（維持／順次置き換え／完全削除）を一言書いておく。

**8-4. ルールのバージョン管理**
この設計ルール自体も、以下のように分けておくと、あとからどこを変更したか追いやすくなります。[24][25][26]

- ファイル構成に関するルール（HTML/CSS/JS/画像）
- セクションの命名とID／クラスのルール
- JavaScriptの役割分担と初期化方法のルール
- リンク構造（TOP ↔ 下層）のルール

この4ブロックごとに、「バージョン1.0」「バージョン1.1」…のようにメモしておけば、「リンク構造のルールだけ変更した」「JSの分割ルールだけ変更した」といった履歴も整理できます。[25][28]
